%description:
Test AddressManagement class

%includes:
#include "inet/networklayer/contract/ipv6/IPv6Address.h"
#include "inet/networklayer/ipv6mev/AddressManagement.h"

%global:
using namespace inet;

%activity:
EV << "Starting test:" << endl;
AddressManagement am;
am.initiateAddressMap(255,36);
EV << am.to_string() << endl; // ID:00000000:000000FF;Seq:37;Ack:0; 37;
IPv6Address ip1("ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111");
EV << ip1.str() << endl; // ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111
IPv6Address ip2("ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222");
EV << ip2.str() << endl; // ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222
IPv6Address ip3("ffff:eeee:dddd:cccc:bbbb:aaaa:9999:3333");
EV << ip3.str() << endl; // ffff:eeee:dddd:cccc:bbbb:aaaa:9999:3333
IPv6Address ip4("ffff:eeee:dddd:cccc:bbbb:aaaa:9999:4444");
EV << ip4.str() << endl; // ffff:eeee:dddd:cccc:bbbb:aaaa:9999:4444
am.addIPv6AddressToAddressMap(id, ip1);
EV << am.to_string() << endl; // ID:00000000:000000FF;Seq:38;Ack:0; 38: ;
am.addIPv6AddressToAddressMap(id, ip2);
EV << am.to_string() << endl; // ID:00000000:000000FF;Seq:39;Ack:0; 38: ;
am.addIPv6AddressToAddressMap(id, ip3);
EV << am.to_string() << endl; // ID:00000000:000000FF;Seq:40;Ack:0; 38: ;
am.setLastAcknowledgemnt(id, 40);
EV << am.to_string() << endl; // ID:00000000:000000FF;Seq:40;Ack:40; 38: ;
am.removeIPv6AddressFromAddressMap(id, ip2);
EV << am.to_string() << endl;
AddressManagement::AddressChange ac = am.getUnacknowledgedIPv6AddressList(id,(uint)40,(uint)41);
EV << am.to_string(ac) << endl; // Add:0;Rem:1;#:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222
ac = am.getUnacknowledgedIPv6AddressList(id,(uint)41,(uint)41);
EV << am.to_string(ac) << endl; // Add:0;Rem:0;#:
ac = am.getUnacknowledgedIPv6AddressList(id,(uint)39,(uint)41);
EV << am.to_string(ac) << endl; // Add:0;Rem:0;#:
ac = am.getUnacknowledgedIPv6AddressList(id,(uint)38,(uint)41);
EV << am.to_string(ac) << endl; // Add:0;Rem:0;#:
am.addIPv6AddressToAddressMap(id, ip4);
EV << am.to_string() << endl; // ID:00000000:000000FF;Seq:40;Ack:0; 38: ;
am.removeIPv6AddressFromAddressMap(id, ip1);
EV << am.to_string() << endl;
ac = am.getUnacknowledgedIPv6AddressList(id,(uint)39,(uint)43);
EV << am.to_string(ac) << endl; // Add:0;Rem:0;#:
AddressManagement am2;
am2.initiateAddressMap(l3addr.toID().getId(),60);
EV << am2.to_string() << endl; // ID:00000000:000000FF;Seq:61;Ack:0; 37;
am2.setLastAcknowledgemnt(id, 61);
EV << am2.to_string() << endl; // ID:00000000:000000FF;Seq:40;Ack:40; 38: ;
am2.addIPv6AddressToAddressMap(id, ip1);
am2.addIPv6AddressToAddressMap(id, ip2);
am2.addIPv6AddressToAddressMap(id, ip3);
am2.removeIPv6AddressFromAddressMap(id, ip1);
EV << am2.to_string() << endl; // ID:00000000:000000FF;Seq:40;Ack:0; 38: ;


%contains: stdout
Starting test:
Id:00000000:000000FF;Seq:37;Ack:0;
37:

ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111
ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222
ffff:eeee:dddd:cccc:bbbb:aaaa:9999:3333
ffff:eeee:dddd:cccc:bbbb:aaaa:9999:4444
Id:00000000:000000FF;Seq:38;Ack:0;
37:
38:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111

Id:00000000:000000FF;Seq:39;Ack:0;
37:
38:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111
39:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222

Id:00000000:000000FF;Seq:40;Ack:0;
37:
38:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111
39:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222
40:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:3333

Id:00000000:000000FF;Seq:40;Ack:40;
37:
38:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111
39:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222
40:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:3333

Id:00000000:000000FF;Seq:41;Ack:40;
37:
38:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111
39:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222
40:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:3333
41:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:3333

Add:0;Rem:1;#:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222

Add:0;Rem:0;#:

Add:1;Rem:1;#:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:3333->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222

Add:2;Rem:1;#:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:3333->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222

Id:00000000:000000FF;Seq:42;Ack:40;
37:
38:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111
39:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222
40:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:3333
41:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:3333
42:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:3333->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:4444

Id:00000000:000000FF;Seq:43;Ack:40;
37:
38:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111
39:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222
40:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:3333
41:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:3333
42:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:3333->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:4444
43:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:3333->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:4444

Add:2;Rem:2;#:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:3333->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:4444->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111

Id:00000000:000000FF;Seq:61;Ack:0;
61:

Id:00000000:000000FF;Seq:61;Ack:61;
61:

Id:00000000:000000FF;Seq:1;Ack:61;
0:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:3333
1:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:3333
61:
62:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111
63:ffff:eeee:dddd:cccc:bbbb:aaaa:9999:1111->ffff:eeee:dddd:cccc:bbbb:aaaa:9999:2222